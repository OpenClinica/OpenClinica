<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9 http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">
	<changeSet author="ahamid" id="2010-10-29-5930-1" dbms="postgresql">
		<comment>Item_Data (old_status)</comment>
		<addColumn tableName="item_data">
			<column name="old_status_id" type="int" defaultValueNumeric="1"/>
		</addColumn>
	</changeSet>
	<changeSet author="ahamid" id="2010-10-29-5930-2" dbms="oracle">
		<comment>Item_data (old_status)</comment>
        <addColumn tableName="item_data">
            <column name="old_status_id" type="int" defaultValueNumeric="1"/>
        </addColumn>
	</changeSet>
    <changeSet author="ahamid" id="2010-10-29-5930-3">
        <addForeignKeyConstraint constraintName="fk_old_status_id"
                                 referencedTableName="status"
                                 baseColumnNames="old_status_id"
                                 baseTableName="item_data"
                                 referencedColumnNames="status_id"/>
    </changeSet>
    <changeSet author="ahamid" id="2010-10-29-5930-4">
        <sql>
            update item_data set old_status_id = status_id;
        </sql>
    </changeSet>
</databaseChangeLog>
